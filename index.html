<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Async i Await rozbrajanie pułapek przez Łotrzyka z .NET-em na poziomie 9.0 Preview 4</title>
        <meta charset="utf-8" />
        <meta http-equiv="x-ua-compatible" content="ie=edge" />
        <meta name="viewport" content="width=device-width" />
        <link href="https://fonts.googleapis.com/css?family=Fira+Sans:400,900&amp;subset=latin-ext" rel="stylesheet" />
        <!-- Shower Theme -->
        <link rel="stylesheet" href="vendors/shower-ribbon/styles/screen-16x9.css" />
        <link rel="stylesheet" href="vendors/shower-CezaryWalenciuk/styles/main.css" />
        <!-- Prism.js -->
        <!---<link rel="stylesheet" href="vendors/prism/prism-my-white.css" />
        <link rel="stylesheet" href="vendors/prism/custom-prism.css" />
        <link rel="stylesheet" href="codegrid-white.css" />
        -->
        <link rel="stylesheet" href="vendors/prism/prism-my-dark.css" />
        <link rel="stylesheet" href="vendors/prism/custom-prism.css" />
        <link rel="stylesheet" href="codegrid-dark.css" /> 
    
        <meta property="og:type" content="website">
        <meta property="og:title" content="Async i Await rozbrajanie pułapek przez Łotrzyka z .NET-em na poziomie 9.0 Preview 4">
        <meta property="og:description" content="Presentation for WDI">
        <meta property="og:url" content="https://github.com/PanNiebieski/MSTechSummit_Async_i_Await_rozbrajanie_pulapek_przez_Lotrzyka_z_NET-em_na_poziomie_9_0_Preview_3/">
        <meta property="og:site_name" content="Async i Await rozbrajanie pułapek przez Łotrzyka z .NET-em na poziomie 9.0 Preview 4">
        <meta property="og:image" content="https://github.com/PanNiebieski/MSTechSummit_Async_i_Await_rozbrajanie_pulapek_przez_Lotrzyka_z_NET-em_na_poziomie_9_0_Preview_3/forSocialMedia/FacebookImageForMainPage.jpg"><meta property="og:image:width" content="1200">
        <meta property="og:image:height" content="630">
        <meta name="twitter:title" content="Async i Await rozbrajanie pułapek przez Łotrzyka z .NET-em na poziomie 9.0 Preview 4">
        <meta name="twitter:description" content="Presentation for WDI">
        <meta name="twitter:image" content="https://github.com/PanNiebieski/MSTechSummit_Async_i_Await_rozbrajanie_pulapek_przez_Lotrzyka_z_NET-em_na_poziomie_9_0_Preview_3/forSocialMedia/FacebookImageForMainPage.jpg">
        <meta name="twitter:card" content="summary_large_image">
        <meta name="twitter:site" content="@walenciukc">
        <link rel="icon" type="image/png" sizes="16x16" href="https://github.com/PanNiebieski/MSTechSummit_Async_i_Await_rozbrajanie_pulapek_przez_Lotrzyka_z_NET-em_na_poziomie_9_0_Preview_3/forSocialMedia/icon/icon16x16.png">
        <link rel="apple-touch-icon" href="https://github.com/PanNiebieski/MSTechSummit_Async_i_Await_rozbrajanie_pulapek_przez_Lotrzyka_z_NET-em_na_poziomie_9_0_Preview_3/forSocialMedia/icon180x180.png">
        <link rel="shortcut icon" href="https://github.com/PanNiebieski/MSTechSummit_Async_i_Await_rozbrajanie_pulapek_przez_Lotrzyka_z_NET-em_na_poziomie_9_0_Preview_3/forSocialMedia/icon16x16.png">
        <meta name="msapplication-square150x150logo" content="https://github.com/PanNiebieski/MSTechSummit_Async_i_Await_rozbrajanie_pulapek_przez_Lotrzyka_z_NET-em_na_poziomie_9_0_Preview_3/forSocialMedia/icon180x180.png">
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    </head>
<body class="shower list">

    <header class="caption">
        <h1>Async i Await rozbrajanie pułapek przez Łotrzyka z .NET-em na poziomie 9.0 Preview 4</h1>
        <p></p>
    </header>
    <section class="slide front-page">
        <div class="details">
            <!-- 1. Avatar -->
            <span>Cezary Walenciuk</span>
            <!-- 3. Presentation title -->
            <h2 class="bigbig"><strong style="font-size: 35px;  line-height: 1.3;">

                    <span class="titlec1">Async i Await</span>
                    <br />
                    <span class="titlec5">rozbrajanie pułapek przez Łotrzyka<span>
                    <br />
                    <span class="titlec3">z .NET-em</span>
                    <br />
                    <span class="titlec1">na poziomie 9.0 Preview 4</span>
                </strong></h2>
            <!-- 5. Contact the speaker -->
            <h2><a href="https://twitter.com/WalenciukC">@walenciukC</a></h2>
        </div>
        <div>
            <!-- 2. Speaker -->
        </div>
        <div class="imag">
            <img src="images/my-avatar.jpg" alt="Speaker">
        </div>
    </section>
  
    <!--

Tylko najlepszy Łotrzyk zagląda do środka i widzi, że kompilator .NET zamienia nasze metody asynchroniczne w klasy? I że .NET dodaje blok try/catch do każdej z tych klas, potencjalnie ukrywając rzucone wyjątki? 

Podczas tej sesji dowiemy się, jak najlepiej wykorzystać async/await w języku C#, analizując sposób, w jaki .NET kompiluje nasz kod asynchroniczny.

Poza tym zobaczysz najnowsze bajery nawet ten jeden fajny z .NET 9 Preview


Co robi tak naprawdę async i await?
Co dodaje kompilator C#?
Ulepszymy kod async i await.
Najlepsze praktyki, czyli na jakie pułapki trzeba uważać.
Pokaż mi coś fajnego z .NET 9 Preview 3
-->
<section class="slide prism over bhgry">
    <div class="grid-container">
        <div class="HeaderTitle GG">
            <h2 class="headerCODE GG">Klasa Thread bez parametru</h2>
        </div>
        <div class="PlaceCodeHere">
            <pre style="font-size: 33px;overflow: hidden;  " class="language-csharp">
                <code style="line-height: 33px !important;">
                    private void Button_Click(object sender, RoutedEventArgs e)
                    {
                        Do();
                    }
                    
                    private void Do()
                    {
                        txtBlock.Text += &quot;Rozpoczynam liczenie&quot;;
                    
                        var result = HeavyCalculation(txt_X.Text, txt_Y.Text);
                    
                        txtBlock.Text += result;
                    }
                    
                    private string HeavyCalculation(string xT, string yT)
                    {
                        var x = int.Parse(xT);  
                        var y = int.Parse(yT);
                    
                        int addition = x + y; int subtraction = x - y;
                        int multiplication = x * y; double divison = x / y;
                    
                        Thread.Sleep(4000);
                    
                        return $&quot;\n{addition}, {subtraction}, {multiplication}, {divison}\n&quot;;
                    }
                </code>
            </pre>
        </div>
    </div>
</section>
<section class="slide prism over bhgry">
    <div class="grid-container">
        <div class="HeaderTitle GG">
            <h2 class="headerCODE GG">Klasa Thread bez parametru</h2>
        </div>
        <div class="PlaceCodeHere">
            <pre style="font-size: 33px;overflow: hidden;  " class="language-csharp">
                <code style="line-height: 33px !important;">
                    private void Do()
                    {
                        txtBlock.Text += &quot;Rozpoczynam liczenie&quot;;
                    
                        var taskRun = Task.Run(() =&gt;HeavyCalculation(txt_X.Text, txt_Y.Text));
                    
                        taskRun.ContinueWith(ct =&gt;
                        {
                                txtBlock.Text += ct.Result;
                        });
                    
                        taskRun.ContinueWith(ct =&gt;
                        {
                            if (ct.IsFaulted)
                            {
                                txtBlock.Text += ct.Exception;
                            }
                        });
                    }
                </code>
            </pre>
        </div>
    </div>
</section>
<section class="slide prism over bhgry">
    <div class="grid-container">
        <div class="HeaderTitle GG">
            <h2 class="headerCODE GG">Klasa Thread bez parametru</h2>
        </div>
        <div class="PlaceCodeHere">
            <pre style="font-size: 33px;overflow: hidden;  " class="language-csharp">
                <code style="line-height: 33px !important;">
                    private void Do()
                    {
                        txtBlock.Text += &quot;Rozpoczynam liczenie&quot;;
                        var x = txt_X.Text; var y = txt_Y.Text;
                        var taskRun = Task.Run(() =&gt;HeavyCalculation(x, y));
                    
                        taskRun.ContinueWith(ct =&gt;
                        {
                            Dispatcher.Invoke(() =&gt;
                            {
                                txtBlock.Text += ct.Result;
                            });
                        });
                    
                        taskRun.ContinueWith(ct =&gt;
                        {
                            if (ct.IsFaulted)
                            {
                                Dispatcher.Invoke(() =&gt;
                                {
                                    txtBlock.Text += ct.Exception;
                                });
                            }
                        });
                    }
                </code>
            </pre>
        </div>
    </div>
</section>
<section class="slide prism over bhgry">
    <div class="grid-container">
        <div class="HeaderTitle GG">
            <h2 class="headerCODE GG">Klasa Thread bez parametru</h2>
        </div>
        <div class="PlaceCodeHere">
            <pre style="font-size: 33px;overflow: hidden;  " class="language-csharp">
                <code style="line-height: 33px !important;">
                    private async void Button_Click(object sender, RoutedEventArgs e)
                    {
                        await DoAsync();
                    }
                    
                    private async Task DoAsync()
                    {
                        txtBlock.Text += &quot;Rozpoczynam liczenie&quot;;
                    
                        var result = await HeavyCalculationAsync(txt_X.Text, txt_Y.Text);
                    
                        txtBlock.Text += result;
                    }
                    
                    private async Task&lt;string&gt; HeavyCalculationAsync(string xT, string yT)
                    {
                        var x = int.Parse(xT);
                        var y = int.Parse(yT);
                    
                        int addition = x + y; int subtraction = x - y;
                        int multiplication = x * y; double divison = x / y;
                    
                        await Task.Delay(4000);
                    
                        return $&quot;\n{addition}, {subtraction}, {multiplication}, {divison}\n&quot;;
                    }
                </code>
            </pre>
        </div>
    </div>
</section>
<section class="slide prism over bhgry">
    <div class="grid-container">
        <div class="HeaderTitle GG">
            <h2 class="headerCODE GG">Klasa Thread bez parametru</h2>
        </div>
        <div class="PlaceCodeHere">
            <pre style="font-size: 33px;overflow: hidden;  " class="language-csharp">
                <code style="line-height: 33px !important;">
                    private async Task DoAsync()
                    {
                        txtBlock.Text += &quot;Rozpoczynam liczenie&quot;;
                        string result;
                    
                        try
                        {
                            result  = await HeavyCalculationAsync(txt_X.Text, txt_Y.Text);
                        }
                        catch (Exception ex)
                        {
                            result = ex.ToString();
                        }
                    
                        txtBlock.Text += result;
                    }
                </code>
            </pre>
        </div>
    </div>
</section>
    <section class="slide prism over bhgry">
        <div class="grid-container">
            <div class="HeaderTitle GG">
                <h2 class="headerCODE GG">Klasa Thread bez parametru</h2>
            </div>
            <div class="PlaceCodeHere">
                <pre style="font-size: 33px;overflow: hidden;  " class="language-csharp">
                    <code style="line-height: 33px !important;">
                        static void Main(string[] args)
                        {
                            Thread thread = new Thread(new ThreadStart(Do));
                            thread.IsBackground = true;
                            thread.Start();
                            thread.Join();
                        }
                
                        public static void Do()
                        {}
                    </code>
                </pre>
            </div>
            <div class="AnswerCode">
                <div class="pytanie">
                    <h3></h3>
                </div>
                <div class="odpowiedz">
                    
                </div>
            </div>
        </div>
    </section>
    <section class="slide prism over bhgry">
        <div class="grid-container">
            <div class="HeaderTitle GG">
                <h2 class="headerCODE GG">Thread z parametrem</h2>
            </div>
            <div class="PlaceCodeHere">
                <pre style="font-size: 25px;overflow: hidden;  " class="language-csharp">
                    <code style="line-height: 25px !important;">
                        static void Main(string[] args)
                        {
                            Thread thread2 = new Thread(new ParameterizedThreadStart(Do2));
                            thread2.IsBackground = true;
                            thread2.Start("parametr");
                            thread2.Join();
                        }
                
                        public static void Do2(object par)
                        {}
                    </code>
                </pre>
            </div>
            <div class="AnswerCode">
                <div class="pytanie">
                    <h3></h3>
                </div>
                <div class="odpowiedz">
                    Jeżeli potrzebne Ci są parametry, to pojawia się nowa delegata
                </div>
            </div>
        </div>
    </section>
    <section class="slide prism over bhgry">
        <div class="grid-container">
            <div class="HeaderTitle GG">
                <h2 class="headerCODE GG">ThreadPool</h2>
            </div>
            <div class="PlaceCodeHere">
                <pre style="font-size: 37px;overflow: hidden;  " class="language-csharp">
                    <code style="line-height: 37px !important;">
                        static void Main(string[] args)
                        {
                            ThreadPool.QueueUserWorkItem(Do);
                        }
                
                        public static void Do(object? state)
                        {}
                    </code>
                </pre>
            </div>
            <div class="AnswerCode">
                <div class="pytanie">
                    <h3></h3>
                </div>
                <div class="odpowiedz">
                    Możesz dodać "zadanie"(workitem) do puli.
                </div>
            </div>
        </div>
    </section>
    <section class="slide prism over bhgry">
        <div class="grid-container">
            <div class="HeaderTitle GG">
                <h2 class="headerCODE GG">IAsyncResult, czyli jak kiedyś robiło się asynchroniczne operacje</h2>
            </div>
            <div class="PlaceCodeHere">
                <pre style="font-size: 25px;overflow: hidden;  " class="language-csharp">
                    <code style="line-height: 25px !important;">

                        static void Main(string[] args)
                        {              
                            Func&lt;int, int&gt; method =
                                (int a) =&gt; { return a; };
                
                            IAsyncResult handle =
                                method.BeginInvoke(100,
                                new AsyncCallback(WhenDone),
                                new object());
                        }
                
                        private static void WhenDone(IAsyncResult ar)
                        {
                            var target = (Func&lt;int, int&gt;)ar.AsyncState;
                            int result = target.EndInvoke(ar);
                
                            Console.WriteLine(result);
                        }
                    </code>
                </pre>
            </div>
          </div>
    </section>
    <section class="slide prism over bhgry">
        <div class="grid-container">
            <div class="HeaderTitle GG">
                <h2 class="headerCODE GG">Event Asynchronous Pattern</h2>
            </div>
            <div class="PlaceCodeHere">
                <pre style="font-size: 20px;overflow: hidden;  " class="language-csharp">
                    <code style="line-height: 20px !important;">
                        static void Main(string[] args)
                        {
                            var worker = new BackgroundWorker();
                
                            worker.DoWork += WorkerDoSomething;
                
                            worker.ProgressChanged += Worker_ProgressChanged;
                            worker.RunWorkerCompleted += Worker_RunWorkerCompleted;
                            worker.RunWorkerAsync(worker);
                        }
                
                        private static void Worker_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
                        {}
                        private static void WorkerDoSomething(object sender, DoWorkEventArgs e)
                        {}
                        private static void Worker_ProgressChanged(object sender, ProgressChangedEventArgs e)
                        {}
                    </code>
                </pre>
            </div>
            <div class="AnswerCode">
                <div class="pytanie">
                    <h3></h3>
                </div>
                <div class="odpowiedz">
                    
                </div>
            </div>
          </div>
    </section>
    <section class="slide prism over bhgry">
        <div class="grid-container">
            <div class="HeaderTitle GG">
                <h2 class="headerCODE GG">ContinueWith -> Legacy</h2>
            </div>
            <div class="PlaceCodeHere">
                <pre style="font-size: 29px;overflow: hidden;  " class="language-csharp">
                    <code style="line-height: 29px !important;">
                        Task&#x3C;int&#x3E;t = Task.Run(() =>
                        {
                            return 44;
                        });
                        
                        Task&#x3C;int&#x3E; t2 = t.ContinueWith(a =>
                        {
                            return t.Result + 66;
                        },
                        TaskContinuationOptions.OnlyOnRanToCompletion);
                        
                        Task t3 = t.ContinueWith(a =>
                        {
                            Console.WriteLine("Error");

                        }, TaskContinuationOptions.OnlyOnFaulted);
                    </code>
                </pre>
            </div>
          </div>
    </section>
    <section class="slide prism over bhgry">
        <div class="grid-container">
            <div class="HeaderTitle GG">
                <h2 class="headerCODE GG">Task.Unwrap</h2>
            </div>
            <div class="PlaceCodeHere">
                <pre style="font-size: 34px;overflow: hidden;  " class="language-csharp">
                    <code style="line-height: 34px !important;">
                        Task&#x3C;Task&#x3C;Task&#x3C;int&#x3E;&#x3E;&#x3E; t =
                            Task.Factory.StartNew
                            (() =>
                            {
                                return Task.Factory.StartNew(
                                () =>
                                Task.Run(() => { return 1; }));
            
                            });
            
                        var result = t.Result.Result.Result;
                    </code>
                </pre>
            </div>
          </div>
    </section>
    <section class="slide prism over bhgry">
        <div class="grid-container">
            <div class="HeaderTitle GG">
                <h2 class="headerCODE GG">Task.Unwrap</h2>
            </div>
            <div class="PlaceCodeHere">
                <pre style="font-size: 34px;overflow: hidden;  " class="language-csharp">
                    <code style="line-height: 34px !important;">
                        Task&#x3C;Task&#x3C;Task&#x3C;int&#x3E;&#x3E;&#x3E; t =
                            Task.Factory.StartNew
                            (() =>
                            {
                                return Task.Factory.StartNew(
                                () =>
                                Task.Run(() => { return 1; }));
            
                            });
                                    
                        var unwrap = t.Unwrap();
                        var unwrap2 = unwrap.Unwrap();
                        var result = unwrap2.Result;
                    </code>
                </pre>
            </div>
          </div>
    </section>
    <section class="slide prism over bhgry">
        <div class="grid-container">
            <div class="HeaderTitle GG">
                <h2 class="headerCODE GG">WaitAll i WaitAny</h2>
            </div>
            <div class="PlaceCodeHere">
                <pre style="font-size: 44px;overflow: hidden;  " class="language-csharp">
                    <code style="line-height: 44px !important;">
                        Task t1 = Task.Delay(2000);
                        Task t2 = Task.Delay(4000);
                        Task t3 = Task.Delay(6000);
            
                        Task.WaitAll(t1, t2, t3);
                        Task.WaitAny(t1, t2, t3);
                    </code>
                </pre>
            </div>
            <div class="AnswerCode">
                <div class="pytanie">
                    <h3></h3>
                </div>
                <div class="odpowiedz">
                    
                </div>
            </div>
          </div>
    </section>
    <section class="slide prism over bhgry">
        <div class="grid-container">
            <div class="HeaderTitle GG">
                <h2 class="headerCODE GG">Task, Async. </h2>
            </div>
            <div class="PlaceCodeHere">
                <pre style="font-size: 37px;overflow: hidden;  " class="language-csharp">
                    <code style="line-height: 37px !important;">

                        static async Task Main()
                        {
                            Task t = What();
                            await t;
                
                            var s = t.Status;
                        }
                
                        static Task What()
                        {
                            return new Task(
                                () => Console.WriteLine("1"));
                
                        }
                    </code>
                </pre>
            </div>
        </div>
    </section>
    <section class="slide prism over bhgry">
        <div class="grid-container">
            <div class="HeaderTitle GG">
                <h2 class="headerCODE GG">Task, Async. </h2>
            </div>
            <div class="PlaceCodeHere">
                <pre style="font-size: 34px;overflow: hidden;  " class="language-csharp">
                    <code style="line-height: 34px !important;">
                        await Task.Run
                        (
                            () => DoExpensiveOperation(someParameter)
                        );
                    </code>
                </pre>
            </div>
          </div>
    </section>
    <section class="slide creamGrey  compact ">
        <h2>Async i Await?</h2>
        <ol>
            <li class="next">Zaraz to mówimy o Rust czy o C#</li>
            <li class="next">Zaraz to mówimy o JavaScript czy o C#</li>
            <li class="next">Zaraz to mówimy o Python czy o C#</li>
            <li class="next">Zaraz to mówimy o TypeScript czy o C#</li>
        </ol>
    </section>
    <section class="slide" style="background-color:black">
        <figure>
            <img class="cover" src="pictures/02.gif" alt="blog">
            <figcaption class="white">CW</figcaption>
        </figure>
    </section>
    <section class="slide" style="background-color:black">
        <figure>
            <img class="cover" src="pictures/03.gif" alt="blog">
            <figcaption class="white">CW</figcaption>
        </figure>
    </section>
    <section class="slide" style="background-color:black">
        <figure>
            <img class="cover" src="pictures/03.png" alt="blog">
            <figcaption class="white">CW</figcaption>
        </figure>
    </section>
    <section class="slide prism over bhgry">
        <div class="grid-container">
            <div class="HeaderTitle GG">
                <h2 class="headerCODE GG">Async i Await : maszyna stanów pamięta zakończenie</h2>
            </div>
            <div class="PlaceCodeHere">
                <pre style="font-size: 34px;overflow: hidden;  " class="language-csharp">
                    <code style="line-height: 34px !important;">
                        Task&lt;string&gt; t = File.ReadAllTextAsync(@&quot;D:\numbers.txt&quot;);

                        var numbers1 = await t;
                        var numbers2 = await t;
                        
                        Console.WriteLine(object.ReferenceEquals(numbers1, numbers2));
                    </code>
                </pre>
            </div>
          </div>
    </section>
    <section class="slide prism over bhgry">
        <div class="grid-container">
            <div class="HeaderTitle GG">
                <h2 class="headerCODE GG">O co chodzi ?</h2>
            </div>
            <div class="PlaceCodeHere">
                <pre style="font-size: 17px;overflow: hidden;  " class="language-csharp">
                    <code style="line-height: 17px !important;">
                        Console.WriteLine(DateTime.Now);

                        // This block takes 1 second to run because all
                        // 5 tasks are running simultaneously
                        {
                            var a = Task.Delay(1000);
                            var b = Task.Delay(1000);
                            var c = Task.Delay(1000);
                            var d = Task.Delay(1000);
                            var e = Task.Delay(1000);
                        
                            await a;
                            await b;
                            await c;
                            await d;
                            await e;
                        }
                        
                        Console.WriteLine(DateTime.Now);
                        
                        // This block takes 5 seconds to run because each "await"
                        // pauses the code until the task finishes
                        {
                            await Task.Delay(1000);
                            await Task.Delay(1000);
                            await Task.Delay(1000);
                            await Task.Delay(1000);
                            await Task.Delay(1000);
                        }
                        Console.WriteLine(DateTime.Now);
                    </code>
                </pre>
            </div>
          </div>
    </section>
    <section class="slide creamR">
        <span class="shout colors deepbluetext" ><span>Ten kod zadziała róźnie w zależności od tego czy jest to ASP.NET CORE czy ASP.NET<br />
        </span></span>
    </section>
    <section class="slide prism over bhgry">
        <div class="grid-container">
            <div class="HeaderTitle GG">
                <h2 class="headerCODE GG">Ten kod zadziała róźnie w zależności od tego czy jest to ASP.NET CORE czy stary</h2>
            </div>
            <div class="PlaceCodeHere">
                <pre style="font-size: 22px;overflow: hidden;  " class="language-csharp">
                    <code style="line-height: 22px !important;">

                        private HttpClient _client = new HttpClient();

                        async Task&#x3C;List&#x3C;string&#x3E;&#x3E; GetBothAsync(string url1, string url2)
                        {
                            var result = new List&#x3C;string&#x3E;();
                            var task1 = GetOneAsync(result, url1);
                            var task2 = GetOneAsync(result, url2);
                            await Task.WhenAll(task1, task2);
                            return result;
                        }
                        
                        async Task GetOneAsync(List&#x3C;string&#x3E; result, string url)
                        {
                            var data = await _client.GetStringAsync(url);
                            result.Add(data);
                        }
                    </code>
                </pre>
            </div>
          </div>
    </section>
    <section class="slide creamBlack">
        <span class="shout colors smallerfontnew" >
            <span>
            W ASP.NET HttpClient wykona po kolei operacje asynchroniczne - w jednym wątku - jak w kolejce. każda operacja HttpClient będzie czekała na wcześniejszą przez "Request Context".
            <br /><br />
            W ASP.NET CORE obie operacje pobrania zawartości strony WWW przez HttpClient uruchomią się równocześnie co spowoduje, że twoja lista napisów może wyglądać zupełnie inaczej.
            </span>
        </span>
    </section>

    <!--DEMO PROSTE WYSŁANIE WIADOMOŚCI-->
    <section class="slide prism over bhgry">
        <div class="grid-container">
            <div class="HeaderTitle GG"> 
                <h2 class="headerCODE GG">GetCatFact</h2>
            </div>
            <div class="PlaceCodeHere canscroll">
                <pre style="font-size: 24px;overflow: hidden;  " class="language-csharp">
                    <code style="line-height: 24px !important;">
                        var fact = await GetCatFact(new HttpClient());
                        Console.WriteLine(fact.Fact);

                        async Task&lt;CatFact&gt; GetCatFact(HttpClient client)
                        {
                            var response = await client.GetAsync(&quot;https://catfact.ninja/fact&quot;);
                            response.EnsureSuccessStatusCode();

                            var stream = await response.Content.ReadAsStreamAsync();

                            JsonSerializerOptions options = new();
                            options.PropertyNameCaseInsensitive = true;
                            var catfact = await JsonSerializer.DeserializeAsync&lt;CatFact&gt;(stream, options);

                            return catfact ?? throw new InvalidOperationException(&quot;CatFact can&#39;t be null&quot;);
                        }

                        public record CatFact(string? Fact, int Length);
                    </code>
                </pre>
            </div>
        </div>
    </section>
    <section class="slide prism over bhgry">
        <div class="grid-container">
            <div class="HeaderTitle GG"> 
                <h2 class="headerCODE GG">GetCatFactAsync</h2>
            </div>
            <div class="PlaceCodeHere canscroll">
                <pre style="font-size: 24px;overflow: hidden;  " class="language-csharp">
                    <code style="line-height: 24px !important;">
                        var fact = await GetCatFactAsync(new HttpClient());
                        Console.WriteLine(fact.Fact);

                        async Task&lt;CatFact&gt; GetCatFactAsync(HttpClient client)
                        {
                            var response = await client.GetAsync(&quot;https://catfact.ninja/fact&quot;);
                            response.EnsureSuccessStatusCode();

                            var stream = await response.Content.ReadAsStreamAsync();

                            JsonSerializerOptions options = new();
                            options.PropertyNameCaseInsensitive = true;
                            var catfact = await JsonSerializer.DeserializeAsync&lt;CatFact&gt;(stream, options);

                            return catfact ?? throw new InvalidOperationException(&quot;CatFact can&#39;t be null&quot;);
                        }

                        public record CatFact(string? Fact, int Length);
                    </code>
                </pre>
            </div>
        </div>
    </section>
    <section class="slide prism over bhgry">
        <div class="grid-container">
            <div class="HeaderTitle GG"> 
                <h2 class="headerCODE GG">GetCatFactAsync</h2>
            </div>
            <div class="PlaceCodeHere canscroll">
                <pre style="font-size: 24px;overflow: hidden;  " class="language-csharp">
                    <code style="line-height: 24px !important;">
                        using System.Text.Json;
                        using System;
                        using System.Net.Http;
                        using System.Threading.Tasks;
                                            
                        public record CatFact(string? Fact, int Length);
                        
                        public class C {
                            public async Task M() 
                            {
                               var fact = await GetCatFact(new HttpClient());
                               Console.WriteLine(fact.Fact);                   
                            }
                            
                            public async Task&lt;CatFact&gt; GetCatFact(HttpClient client)
                            {
                                var response = await client.GetAsync(&quot;https://catfact.ninja/fact&quot;);
                                response.EnsureSuccessStatusCode();
                        
                                var stream = await response.Content.ReadAsStreamAsync();
                        
                                JsonSerializerOptions options = new();
                                options.PropertyNameCaseInsensitive = true;
                                var catfact = await JsonSerializer.DeserializeAsync&lt;CatFact&gt;(stream, options);
                        
                                return catfact ?? throw new InvalidOperationException(&quot;CatFact can&amp;#39;t be null&quot;);
                            }
                        }  
                    </code>
                </pre>
            </div>
        </div>
    </section>
    <section class="slide prism over bhgry">
        <div class="grid-container">
            <div class="HeaderTitle GG"> 
                <h2 class="headerCODE GG">GetCatFactAsync</h2>
            </div>
            <div class="PlaceCodeHere canscroll">
                <pre style="font-size: 24px;overflow: hidden;  " class="language-csharp">
                    <code style="line-height: 24px !important;">































































































































































































                        using System;
                        using System.Collections.Generic;
                        using System.Diagnostics;
                        using System.IO;
                        using System.Net.Http;
                        using System.Reflection;
                        using System.Runtime.CompilerServices;
                        using System.Security;
                        using System.Security.Permissions;
                        using System.Text;
                        using System.Text.Json;
                        using System.Threading.Tasks;
                        
                        [assembly: CompilationRelaxations(8)]
                        [assembly: RuntimeCompatibility(WrapNonExceptionThrows = true)]
                        [assembly: Debuggable(DebuggableAttribute.DebuggingModes.Default | DebuggableAttribute.DebuggingModes.IgnoreSymbolStoreSequencePoints | DebuggableAttribute.DebuggingModes.EnableEditAndContinue | DebuggableAttribute.DebuggingModes.DisableOptimizations)]
                        [assembly: SecurityPermission(SecurityAction.RequestMinimum, SkipVerification = true)]
                        [assembly: AssemblyVersion(&quot;0.0.0.0&quot;)]
                        [module: UnverifiableCode]
                        [module: RefSafetyRules(11)]
                        
                        [NullableContext(2)]
                        [Nullable(0)]
                        public class CatFact : IEquatable&lt;CatFact&gt;
                        {
                            [CompilerGenerated]
                            [DebuggerBrowsable(DebuggerBrowsableState.Never)]
                            private readonly string &lt;Fact&gt;k__BackingField;
                        
                            [CompilerGenerated]
                            [DebuggerBrowsable(DebuggerBrowsableState.Never)]
                            private readonly int &lt;Length&gt;k__BackingField;
                        
                            [Nullable(1)]
                            [CompilerGenerated]
                            protected virtual Type EqualityContract
                            {
                                [NullableContext(1)]
                                [CompilerGenerated]
                                get
                                {
                                    return typeof(CatFact);
                                }
                            }
                        
                            public string Fact
                            {
                                [CompilerGenerated]
                                get
                                {
                                    return &lt;Fact&gt;k__BackingField;
                                }
                                [CompilerGenerated]
                                init
                                {
                                    &lt;Fact&gt;k__BackingField = value;
                                }
                            }
                        
                            public int Length
                            {
                                [CompilerGenerated]
                                get
                                {
                                    return &lt;Length&gt;k__BackingField;
                                }
                                [CompilerGenerated]
                                init
                                {
                                    &lt;Length&gt;k__BackingField = value;
                                }
                            }
                        
                            public CatFact(string Fact, int Length)
                            {
                                &lt;Fact&gt;k__BackingField = Fact;
                                &lt;Length&gt;k__BackingField = Length;
                                base..ctor();
                            }
                        
                            [NullableContext(1)]
                            [CompilerGenerated]
                            public override string ToString()
                            {
                                StringBuilder stringBuilder = new StringBuilder();
                                stringBuilder.Append(&quot;CatFact&quot;);
                                stringBuilder.Append(&quot; { &quot;);
                                if (PrintMembers(stringBuilder))
                                {
                                    stringBuilder.Append(&#39; &#39;);
                                }
                                stringBuilder.Append(&#39;}&#39;);
                                return stringBuilder.ToString();
                            }
                        
                            [NullableContext(1)]
                            [CompilerGenerated]
                            protected virtual bool PrintMembers(StringBuilder builder)
                            {
                                RuntimeHelpers.EnsureSufficientExecutionStack();
                                builder.Append(&quot;Fact = &quot;);
                                builder.Append((object)Fact);
                                builder.Append(&quot;, Length = &quot;);
                                builder.Append(Length.ToString());
                                return true;
                            }
                        
                            [CompilerGenerated]
                            public static bool operator !=(CatFact left, CatFact right)
                            {
                                return !(left == right);
                            }
                        
                            [CompilerGenerated]
                            public static bool operator ==(CatFact left, CatFact right)
                            {
                                return (object)left == right || ((object)left != null &amp;&amp; left.Equals(right));
                            }
                        
                            [CompilerGenerated]
                            public override int GetHashCode()
                            {
                                return (EqualityComparer&lt;Type&gt;.Default.GetHashCode(EqualityContract) * -1521134295 + EqualityComparer&lt;string&gt;.Default.GetHashCode(&lt;Fact&gt;k__BackingField)) * -1521134295 + EqualityComparer&lt;int&gt;.Default.GetHashCode(&lt;Length&gt;k__BackingField);
                            }
                        
                            [CompilerGenerated]
                            public override bool Equals(object obj)
                            {
                                return Equals(obj as CatFact);
                            }
                        
                            [CompilerGenerated]
                            public virtual bool Equals(CatFact other)
                            {
                                return (object)this == other || ((object)other != null &amp;&amp; EqualityContract == other.EqualityContract &amp;&amp; EqualityComparer&lt;string&gt;.Default.Equals(&lt;Fact&gt;k__BackingField, other.&lt;Fact&gt;k__BackingField) &amp;&amp; EqualityComparer&lt;int&gt;.Default.Equals(&lt;Length&gt;k__BackingField, other.&lt;Length&gt;k__BackingField));
                            }
                        
                            [NullableContext(1)]
                            [CompilerGenerated]
                            public virtual CatFact &lt;Clone&gt;$()
                            {
                                return new CatFact(this);
                            }
                        
                            [CompilerGenerated]
                            protected CatFact([Nullable(1)] CatFact original)
                            {
                                &lt;Fact&gt;k__BackingField = original.&lt;Fact&gt;k__BackingField;
                                &lt;Length&gt;k__BackingField = original.&lt;Length&gt;k__BackingField;
                            }
                        
                            [CompilerGenerated]
                            public void Deconstruct(out string Fact, out int Length)
                            {
                                Fact = this.Fact;
                                Length = this.Length;
                            }
                        }
                        
                        [NullableContext(1)]
                        [Nullable(0)]
                        public class C
                        {
                            [CompilerGenerated]
                            private sealed class &lt;GetCatFact&gt;d__1 : IAsyncStateMachine
                            {
                                public int &lt;&gt;1__state;
                        
                                [Nullable(0)]
                                public AsyncTaskMethodBuilder&lt;CatFact&gt; &lt;&gt;t__builder;
                        
                                [Nullable(0)]
                                public HttpClient client;
                        
                                [Nullable(0)]
                                public C &lt;&gt;4__this;
                        
                                [Nullable(0)]
                                private HttpResponseMessage &lt;response&gt;5__1;
                        
                                [Nullable(0)]
                                private Stream &lt;stream&gt;5__2;
                        
                                [Nullable(0)]
                                private JsonSerializerOptions &lt;options&gt;5__3;
                        
                                [Nullable(0)]
                                private CatFact &lt;catfact&gt;5__4;
                        
                                [Nullable(0)]
                                private HttpResponseMessage &lt;&gt;s__5;
                        
                                [Nullable(0)]
                                private Stream &lt;&gt;s__6;
                        
                                [Nullable(0)]
                                private CatFact &lt;&gt;s__7;
                        
                                [Nullable(new byte[] { 0, 1 })]
                                private TaskAwaiter&lt;HttpResponseMessage&gt; &lt;&gt;u__1;
                        
                                [Nullable(new byte[] { 0, 1 })]
                                private TaskAwaiter&lt;Stream&gt; &lt;&gt;u__2;
                        
                                [Nullable(new byte[] { 0, 2 })]
                                private ValueTaskAwaiter&lt;CatFact&gt; &lt;&gt;u__3;
                        
                                private void MoveNext()
                                {
                                    int num = &lt;&gt;1__state;
                                    CatFact result;
                                    try
                                    {
                                        TaskAwaiter&lt;HttpResponseMessage&gt; awaiter3;
                                        TaskAwaiter&lt;Stream&gt; awaiter2;
                                        ValueTaskAwaiter&lt;CatFact&gt; awaiter;
                                        switch (num)
                                        {
                                            default:
                                                awaiter3 = client.GetAsync(&quot;https://catfact.ninja/fact&quot;).GetAwaiter();
                                                if (!awaiter3.IsCompleted)
                                                {
                                                    num = (&lt;&gt;1__state = 0);
                                                    &lt;&gt;u__1 = awaiter3;
                                                    &lt;GetCatFact&gt;d__1 stateMachine = this;
                                                    &lt;&gt;t__builder.AwaitUnsafeOnCompleted(ref awaiter3, ref stateMachine);
                                                    return;
                                                }
                                                goto IL_008a;
                                            case 0:
                                                awaiter3 = &lt;&gt;u__1;
                                                &lt;&gt;u__1 = default(TaskAwaiter&lt;HttpResponseMessage&gt;);
                                                num = (&lt;&gt;1__state = -1);
                                                goto IL_008a;
                                            case 1:
                                                awaiter2 = &lt;&gt;u__2;
                                                &lt;&gt;u__2 = default(TaskAwaiter&lt;Stream&gt;);
                                                num = (&lt;&gt;1__state = -1);
                                                goto IL_011b;
                                            case 2:
                                                {
                                                    awaiter = &lt;&gt;u__3;
                                                    &lt;&gt;u__3 = default(ValueTaskAwaiter&lt;CatFact&gt;);
                                                    num = (&lt;&gt;1__state = -1);
                                                    break;
                                                }
                                                IL_011b:
                                                &lt;&gt;s__6 = awaiter2.GetResult();
                                                &lt;stream&gt;5__2 = &lt;&gt;s__6;
                                                &lt;&gt;s__6 = null;
                                                &lt;options&gt;5__3 = new JsonSerializerOptions();
                                                &lt;options&gt;5__3.PropertyNameCaseInsensitive = true;
                                                awaiter = JsonSerializer.DeserializeAsync&lt;CatFact&gt;(&lt;stream&gt;5__2, &lt;options&gt;5__3).GetAwaiter();
                                                if (!awaiter.IsCompleted)
                                                {
                                                    num = (&lt;&gt;1__state = 2);
                                                    &lt;&gt;u__3 = awaiter;
                                                    &lt;GetCatFact&gt;d__1 stateMachine = this;
                                                    &lt;&gt;t__builder.AwaitUnsafeOnCompleted(ref awaiter, ref stateMachine);
                                                    return;
                                                }
                                                break;
                                                IL_008a:
                                                &lt;&gt;s__5 = awaiter3.GetResult();
                                                &lt;response&gt;5__1 = &lt;&gt;s__5;
                                                &lt;&gt;s__5 = null;
                                                &lt;response&gt;5__1.EnsureSuccessStatusCode();
                                                awaiter2 = &lt;response&gt;5__1.Content.ReadAsStreamAsync().GetAwaiter();
                                                if (!awaiter2.IsCompleted)
                                                {
                                                    num = (&lt;&gt;1__state = 1);
                                                    &lt;&gt;u__2 = awaiter2;
                                                    &lt;GetCatFact&gt;d__1 stateMachine = this;
                                                    &lt;&gt;t__builder.AwaitUnsafeOnCompleted(ref awaiter2, ref stateMachine);
                                                    return;
                                                }
                                                goto IL_011b;
                                        }
                                        &lt;&gt;s__7 = awaiter.GetResult();
                                        &lt;catfact&gt;5__4 = &lt;&gt;s__7;
                                        &lt;&gt;s__7 = null;
                                        CatFact catFact = &lt;catfact&gt;5__4;
                                        if ((object)catFact == null)
                                        {
                                            throw new InvalidOperationException(&quot;CatFact can&amp;#39;t be null&quot;);
                                        }
                                        result = catFact;
                                    }
                                    catch (Exception exception)
                                    {
                                        &lt;&gt;1__state = -2;
                                        &lt;response&gt;5__1 = null;
                                        &lt;stream&gt;5__2 = null;
                                        &lt;options&gt;5__3 = null;
                                        &lt;catfact&gt;5__4 = null;
                                        &lt;&gt;t__builder.SetException(exception);
                                        return;
                                    }
                                    &lt;&gt;1__state = -2;
                                    &lt;response&gt;5__1 = null;
                                    &lt;stream&gt;5__2 = null;
                                    &lt;options&gt;5__3 = null;
                                    &lt;catfact&gt;5__4 = null;
                                    &lt;&gt;t__builder.SetResult(result);
                                }
                        
                                void IAsyncStateMachine.MoveNext()
                                {
                                    //ILSpy generated this explicit interface implementation from .override directive in MoveNext
                                    this.MoveNext();
                                }
                        
                                [DebuggerHidden]
                                private void SetStateMachine(IAsyncStateMachine stateMachine)
                                {
                                }
                        
                                void IAsyncStateMachine.SetStateMachine(IAsyncStateMachine stateMachine)
                                {
                                    //ILSpy generated this explicit interface implementation from .override directive in SetStateMachine
                                    this.SetStateMachine(stateMachine);
                                }
                            }
                        
                        
                            [CompilerGenerated]
                            private sealed class &lt;M&gt;d__0 : IAsyncStateMachine
                            {
                                public int &lt;&gt;1__state;
                        
                                public AsyncTaskMethodBuilder &lt;&gt;t__builder;
                        
                                [Nullable(0)]
                                public C &lt;&gt;4__this;
                        
                                [Nullable(0)]
                                private CatFact &lt;fact&gt;5__1;
                        
                                [Nullable(0)]
                                private CatFact &lt;&gt;s__2;
                        
                                [Nullable(new byte[] { 0, 1 })]
                                private TaskAwaiter&lt;CatFact&gt; &lt;&gt;u__1;
                        
                                private void MoveNext()
                                {
                                    int num = &lt;&gt;1__state;
                                    try
                                    {
                                        TaskAwaiter&lt;CatFact&gt; awaiter;
                                        if (num != 0)
                                        {
                                            awaiter = &lt;&gt;4__this.GetCatFact(new HttpClient()).GetAwaiter();
                                            if (!awaiter.IsCompleted)
                                            {
                                                num = (&lt;&gt;1__state = 0);
                                                &lt;&gt;u__1 = awaiter;
                                                &lt;M&gt;d__0 stateMachine = this;
                                                &lt;&gt;t__builder.AwaitUnsafeOnCompleted(ref awaiter, ref stateMachine);
                                                return;
                                            }
                                        }
                                        else
                                        {
                                            awaiter = &lt;&gt;u__1;
                                            &lt;&gt;u__1 = default(TaskAwaiter&lt;CatFact&gt;);
                                            num = (&lt;&gt;1__state = -1);
                                        }
                                        &lt;&gt;s__2 = awaiter.GetResult();
                                        &lt;fact&gt;5__1 = &lt;&gt;s__2;
                                        &lt;&gt;s__2 = null;
                                        Console.WriteLine(&lt;fact&gt;5__1.Fact);
                                    }
                                    catch (Exception exception)
                                    {
                                        &lt;&gt;1__state = -2;
                                        &lt;fact&gt;5__1 = null;
                                        &lt;&gt;t__builder.SetException(exception);
                                        return;
                                    }
                                    &lt;&gt;1__state = -2;
                                    &lt;fact&gt;5__1 = null;
                                    &lt;&gt;t__builder.SetResult();
                                }
                        
                                void IAsyncStateMachine.MoveNext()
                                {
                                    //ILSpy generated this explicit interface implementation from .override directive in MoveNext
                                    this.MoveNext();
                                }
                        
                                [DebuggerHidden]
                                private void SetStateMachine(IAsyncStateMachine stateMachine)
                                {
                                }
                        
                                void IAsyncStateMachine.SetStateMachine(IAsyncStateMachine stateMachine)
                                {
                                    //ILSpy generated this explicit interface implementation from .override directive in SetStateMachine
                                    this.SetStateMachine(stateMachine);
                                }
                            }
                        
                            [AsyncStateMachine(typeof(&lt;M&gt;d__0))]
                            [DebuggerStepThrough]
                            public Task M()
                            {
                                &lt;M&gt;d__0 stateMachine = new &lt;M&gt;d__0();
                                stateMachine.&lt;&gt;t__builder = AsyncTaskMethodBuilder.Create();
                                stateMachine.&lt;&gt;4__this = this;
                                stateMachine.&lt;&gt;1__state = -1;
                                stateMachine.&lt;&gt;t__builder.Start(ref stateMachine);
                                return stateMachine.&lt;&gt;t__builder.Task;
                            }
                        
                            [AsyncStateMachine(typeof(&lt;GetCatFact&gt;d__1))]
                            [DebuggerStepThrough]
                            public Task&lt;CatFact&gt; GetCatFact(HttpClient client)
                            {
                                &lt;GetCatFact&gt;d__1 stateMachine = new &lt;GetCatFact&gt;d__1();
                                stateMachine.&lt;&gt;t__builder = AsyncTaskMethodBuilder&lt;CatFact&gt;.Create();
                                stateMachine.&lt;&gt;4__this = this;
                                stateMachine.client = client;
                                stateMachine.&lt;&gt;1__state = -1;
                                stateMachine.&lt;&gt;t__builder.Start(ref stateMachine);
                                return stateMachine.&lt;&gt;t__builder.Task;
                            }
                        }
                        
                    </code>
                </pre>
            </div>
        </div>
    </section>
    <section class="slide prism over bhgry">
        <div class="grid-container">
            <div class="HeaderTitle GG"> 
                <h2 class="headerCODE GG">GetCatFactAsync</h2>
            </div>
            <div class="PlaceCodeHere canscroll">
                <pre style="font-size: 24px;overflow: hidden;  " class="language-csharp">
                    <code style="line-height: 24px !important;">
                        using System;
                        using System.Threading.Tasks;
                        
                        async Task RunAsync()
                        { 
                           var y = 5;
                                
                           await Task.Delay(4000);
                                
                           Console.Write(y);
                        }                                   
                    </code>
                </pre>
            </div>
        </div>
    </section>   
    <section class="slide prism over bhgry">
        <div class="grid-container">
            <div class="HeaderTitle GG"> 
                <h2 class="headerCODE GG">GetCatFactAsync</h2>
            </div>
            <div class="PlaceCodeHere canscroll">
                <pre style="font-size: 24px;overflow: hidden;  " class="language-csharp">
                    <code style="line-height: 24px !important;">




































                        using System;
                        using System.Diagnostics;
                        using System.Reflection;
                        using System.Runtime.CompilerServices;
                        using System.Security;
                        using System.Security.Permissions;
                        using System.Threading.Tasks;
                        
                        [assembly: CompilationRelaxations(8)]
                        [assembly: RuntimeCompatibility(WrapNonExceptionThrows = true)]
                        [assembly: Debuggable(DebuggableAttribute.DebuggingModes.Default | DebuggableAttribute.DebuggingModes.IgnoreSymbolStoreSequencePoints | DebuggableAttribute.DebuggingModes.EnableEditAndContinue | DebuggableAttribute.DebuggingModes.DisableOptimizations)]
                        [assembly: SecurityPermission(SecurityAction.RequestMinimum, SkipVerification = true)]
                        [assembly: AssemblyVersion("0.0.0.0")]
                        [module: UnverifiableCode]
                        [module: RefSafetyRules(11)]
                        
                        [CompilerGenerated]
                        internal class Program
                        {
                            [CompilerGenerated]
                            private sealed class <<<Main>$>g__RunAsync|0_0>d : IAsyncStateMachine
                            {
                                public int <>1__state;
                        
                                public AsyncTaskMethodBuilder <>t__builder;
                        
                                private int <y>5__1;
                        
                                private TaskAwaiter <>u__1;
                        
                                private void MoveNext()
                                {
                                    int num = <>1__state;
                                    try
                                    {
                                        TaskAwaiter awaiter;
                                        if (num != 0)
                                        {
                                            <y>5__1 = 5;
                                            awaiter = Task.Delay(4000).GetAwaiter();
                                            if (!awaiter.IsCompleted)
                                            {
                                                num = (<>1__state = 0);
                                                <>u__1 = awaiter;
                                                <<<Main>$>g__RunAsync|0_0>d stateMachine = this;
                                                <>t__builder.AwaitUnsafeOnCompleted(ref awaiter, ref stateMachine);
                                                return;
                                            }
                                        }
                                        else
                                        {
                                            awaiter = <>u__1;
                                            <>u__1 = default(TaskAwaiter);
                                            num = (<>1__state = -1);
                                        }
                                        awaiter.GetResult();
                                        Console.Write(<y>5__1);
                                    }
                                    catch (Exception exception)
                                    {
                                        <>1__state = -2;
                                        <>t__builder.SetException(exception);
                                        return;
                                    }
                                    <>1__state = -2;
                                    <>t__builder.SetResult();
                                }
                        
                                void IAsyncStateMachine.MoveNext()
                                {
                                    //ILSpy generated this explicit interface implementation from .override directive in MoveNext
                                    this.MoveNext();
                                }
                        
                                [DebuggerHidden]
                                private void SetStateMachine([Nullable(1)] IAsyncStateMachine stateMachine)
                                {
                                }
                        
                                void IAsyncStateMachine.SetStateMachine([Nullable(1)] IAsyncStateMachine stateMachine)
                                {
                                    //ILSpy generated this explicit interface implementation from .override directive in SetStateMachine
                                    this.SetStateMachine(stateMachine);
                                }
                            }
                        
                            private static void <Main>$(string[] args)
                            {
                            }
                        
                            [NullableContext(1)]
                            [AsyncStateMachine(typeof(<<<Main>$>g__RunAsync|0_0>d))]
                            [DebuggerStepThrough]
                            [CompilerGenerated]
                            internal static Task <<Main>$>g__RunAsync|0_0()
                            {
                                <<<Main>$>g__RunAsync|0_0>d stateMachine = new <<<Main>$>g__RunAsync|0_0>d();
                                stateMachine.<>t__builder = AsyncTaskMethodBuilder.Create();
                                stateMachine.<>1__state = -1;
                                stateMachine.<>t__builder.Start(ref stateMachine);
                                return stateMachine.<>t__builder.Task;
                            }
                        }

                        









                    </code>
                </pre>
            </div>
        </div>
    </section>   

    <section class="slide prism over bhgry">
        <div class="grid-container">
            <div class="HeaderTitle GG"> 
                <h2 class="headerCODE GG">GetCatFactAsync</h2>
            </div>
            <div class="PlaceCodeHere canscroll">
                <pre style="font-size: 24px;overflow: hidden;  " class="language-csharp">
                    <code style="line-height: 24px !important;">














                        using System;
                        using System.Diagnostics;
                        using System.Reflection;
                        using System.Runtime.CompilerServices;
                        using System.Security;
                        using System.Security.Permissions;
                        using System.Threading.Tasks;
                        
                        [assembly: CompilationRelaxations(8)]
                        [assembly: RuntimeCompatibility(WrapNonExceptionThrows = true)]
                        [assembly: Debuggable(DebuggableAttribute.DebuggingModes.Default | DebuggableAttribute.DebuggingModes.IgnoreSymbolStoreSequencePoints | DebuggableAttribute.DebuggingModes.EnableEditAndContinue | DebuggableAttribute.DebuggingModes.DisableOptimizations)]
                        [assembly: SecurityPermission(SecurityAction.RequestMinimum, SkipVerification = true)]
                        [assembly: AssemblyVersion("0.0.0.0")]
                        [module: UnverifiableCode]
                        [module: RefSafetyRules(11)]
                        
                        public class Program
                        {
                            [CompilerGenerated]
                            private sealed class <Main>d__0 : IAsyncStateMachine
                            {
                                public int <>1__state;
                        
                                public AsyncVoidMethodBuilder <>t__builder;
                        
                                public Program <>4__this;
                        
                                private int <y>5__1;
                        
                                private TaskAwaiter <>u__1;
                        
                                private void MoveNext()
                                {
                                    int num = <>1__state;
                                    try
                                    {
                                        TaskAwaiter awaiter;
                                        if (num != 0)
                                        {
                                            <y>5__1 = 5;
                                            awaiter = Task.Delay(4000).GetAwaiter();
                                            if (!awaiter.IsCompleted)
                                            {
                                                num = (<>1__state = 0);
                                                <>u__1 = awaiter;
                                                <Main>d__0 stateMachine = this;
                                                <>t__builder.AwaitUnsafeOnCompleted(ref awaiter, ref stateMachine);
                                                return;
                                            }
                                        }
                                        else
                                        {
                                            awaiter = <>u__1;
                                            <>u__1 = default(TaskAwaiter);
                                            num = (<>1__state = -1);
                                        }
                                        awaiter.GetResult();
                                        Console.Write(<y>5__1);
                                    }
                                    catch (Exception exception)
                                    {
                                        <>1__state = -2;
                                        <>t__builder.SetException(exception);
                                        return;
                                    }
                                    <>1__state = -2;
                                    <>t__builder.SetResult();
                                }
                        
                                void IAsyncStateMachine.MoveNext()
                                {
                                    //ILSpy generated this explicit interface implementation from .override directive in MoveNext
                                    this.MoveNext();
                                }
                        
                                [DebuggerHidden]
                                private void SetStateMachine([Nullable(1)] IAsyncStateMachine stateMachine)
                                {
                                }
                        
                                void IAsyncStateMachine.SetStateMachine([Nullable(1)] IAsyncStateMachine stateMachine)
                                {
                                    //ILSpy generated this explicit interface implementation from .override directive in SetStateMachine
                                    this.SetStateMachine(stateMachine);
                                }
                            }
                        
                            [AsyncStateMachine(typeof(<Main>d__0))]
                            [DebuggerStepThrough]
                            private void Main()
                            {
                                <Main>d__0 stateMachine = new <Main>d__0();
                                stateMachine.<>t__builder = AsyncVoidMethodBuilder.Create();
                                stateMachine.<>4__this = this;
                                stateMachine.<>1__state = -1;
                                stateMachine.<>t__builder.Start(ref stateMachine);
                            }
                        }
                                                        
                    </code>
                </pre>
            </div>
        </div>
    </section>   
    <section class="slide prism over bhgry">
        <div class="grid-container">
            <div class="HeaderTitle GG"> 
                <h2 class="headerCODE GG">GetCatFactAsync</h2>
            </div>
            <div class="PlaceCodeHere canscroll">
                <pre style="font-size: 24px;overflow: hidden;  " class="language-csharp">
                    <code style="line-height: 24px !important;">
                        private async void Button_Click(object sender, RoutedEventArgs e)
                        {
                            txtBlock.Text += &quot;Rozpoczynam liczenie&quot;;
                        
                            var result = await HeavyCalculationAsync(txt_X.Text, txt_Y.Text);
                        
                            txtBlock.Text += result;
                        }                              
                    </code>
                </pre>
            </div>
        </div>
    </section>
    <section class="slide prism over bhgry">
        <div class="grid-container">
            <div class="HeaderTitle GG"> 
                <h2 class="headerCODE GG">Async Void</h2>
            </div>
            <div class="PlaceCodeHere canscroll">
                <pre style="font-size: 24px;overflow: hidden;  " class="language-csharp">
                    <code style="line-height: 24px !important;">
                        public class MyViewModel
                        {
                            public MyViewModel()
                            {
                                await RefreshData(CancellationToken.None);
                            }
                        
                            async Task RefreshData(CancellationToken ct)
                            {
                                await Task.Delay(100);
                            }
                        }                              
                    </code>
                </pre>
            </div>
        </div>
    </section>
    <section class="slide prism over bhgry">
        <div class="grid-container">
            <div class="HeaderTitle GG"> 
                <h2 class="headerCODE GG">Async Void</h2>
            </div>
            <div class="PlaceCodeHere canscroll">
                <pre style="font-size: 24px;overflow: hidden;  " class="language-csharp">
                    <code style="line-height: 24px !important;">
                        public class MyViewModel
                        {
                            public MyViewModel()
                            {
                                RefreshData(CancellationToken.None)
                                    .FireAndForgetSafeAsync();
                        
                            }
                        
                            async Task RefreshData(CancellationToken ct)
                            {
                                await Task.Delay(100);
                            }
                        }
                        
                        public static class TaskUtilities
                        {
                        
                            public static async void FireAndForgetSafeAsync(this Task task, 
                                Action&lt;Exception&gt; handler = null)
                            {
                                try
                                {
                                    await task;
                                }
                                catch (Exception ex)
                                {
                                    handler?.Invoke(ex);
                                }
                            }
                        }                      
                    </code>
                </pre>
            </div>
        </div>
    </section>  

    <section class="slide prism over bhgry">
        <div class="grid-container">
            <div class="HeaderTitle GG"> 
                <h2 class="headerCODE GG">Async Void</h2>
            </div>
            <div class="PlaceCodeHere canscroll">
                <pre style="font-size: 24px;overflow: hidden;  " class="language-csharp">
                    <code style="line-height: 24px !important;">
                        private async IAsyncEnumerable&lt;string&gt; GeMyPoem()
                        {
                            using var stream = new StreamReader(@&quot;D:\p.txt&quot;);
                        
                            while (await stream.ReadLineAsync() is string line)
                            {
                                await Task.Delay(500);
                        
                                yield return line;
                            }
                        }                     
                    </code>
                </pre>
            </div>
        </div>
    </section>  
    <section class="slide prism over bhgry">
        <div class="grid-container">
            <div class="HeaderTitle GG"> 
                <h2 class="headerCODE GG">Async Void</h2>
            </div>
            <div class="PlaceCodeHere canscroll">
                <pre style="font-size: 24px;overflow: hidden;  " class="language-csharp">
                    <code style="line-height: 24px !important;">
                        private async IAsyncEnumerable&lt;string&gt; GeMyPoem()
                        {
                            using var stream = new StreamReader(@&quot;D:\p.txt&quot;);
                        
                            while (await stream.ReadLineAsync() is string line)
                            {
                                await Task.Delay(500);
                        
                                yield return line;
                            }
                        }                     
                    </code>
                </pre>
            </div>
        </div>
    </section>  
    <section class="slide prism over bhgry">
        <div class="grid-container">
            <div class="HeaderTitle GG"> 
                <h2 class="headerCODE GG">Async Void</h2>
            </div>
            <div class="PlaceCodeHere canscroll">
                <pre style="font-size: 24px;overflow: hidden;  " class="language-csharp">
                    <code style="line-height: 24px !important;">
                        private async void Button_Click(object sender, RoutedEventArgs e)
                        {
                            await Read();
                        }
                    
                        private async Task Read()
                        {
                            txtBlock.Text = "";
                            await foreach (var item in GeMyPoem())
                            {
                                txtBlock.Text += item + "\n";
                            }
                        }                
                    </code>
                </pre>
            </div>
        </div>
    </section>  

    <section class="slide prism over bhgry">
        <div class="grid-container">
            <div class="HeaderTitle GG"> 
                <h2 class="headerCODE GG">Async Void</h2>
            </div>
            <div class="PlaceCodeHere canscroll">
                <pre style="font-size: 24px;overflow: hidden;  " class="language-csharp">
                    <code style="line-height: 24px !important;">
                        public class MyViewModel
                        {
                            public MyViewModel()
                            {
                                RefreshData(CancellationToken.None)
                                    .SafeFireAndForget((e) =&gt; Console.WriteLine(e));
                        
                            }
                        
                            async Task RefreshData(CancellationToken ct)
                            {
                                await Task.Delay(100);
                            }
                        }
                                                   
                    </code>
                </pre>
            </div>
        </div>
    </section>  
    
    <section class="slide prism over bhgry">
        <div class="grid-container">
            <div class="HeaderTitle GG"> 
                <h2 class="headerCODE GG">GetCatFactAsync</h2>
            </div>
            <div class="PlaceCodeHere canscroll">
                <pre style="font-size: 24px;overflow: hidden;  " class="language-csharp">
                    <code style="line-height: 24px !important;">
                        private async Task StartAsync()
                        {
                            await InternalAsync1();
                        }
                        
                        private async Task InternalAsync1()
                        {
                            await InternalAsync2();
                        }
                        
                        private async Task InternalAsync2()
                        {
                            await InternalAsync3();
                        }
                        
                        private async Task InternalAsync3()
                        {
                            await Task.Delay(1000);
                        }                             
                    </code>
                </pre>
            </div>
        </div>
    </section>
    <section class="slide prism over bhgry">
        <div class="grid-container">
            <div class="HeaderTitle GG"> 
                <h2 class="headerCODE GG">GetCatFactAsync</h2>
            </div>
            <div class="PlaceCodeHere canscroll">
                <pre style="font-size: 24px;overflow: hidden;  " class="language-csharp">
                    <code style="line-height: 24px !important;">
                        private async Task StartAsync()
                        {
                            await InternalAsync1();
                        }
                        
                        private async Task InternalAsync1()
                        {
                            return InternalAsync2();
                        }
                        
                        private Task InternalAsync2()
                        {
                            return InternalAsync3();
                        }
                        
                        private Task InternalAsync3()
                        {
                            return Task.Delay(1000);
                        }                             
                    </code>
                </pre>
            </div>
        </div>
    </section>    
    <section class="slide prism over bhgry">
        <div class="grid-container">
            <div class="HeaderTitle GG"> 
                <h2 class="headerCODE GG">Async Void</h2>
            </div>
            <div class="PlaceCodeHere canscroll">
                <pre style="font-size: 24px;overflow: hidden;  " class="language-csharp">
                    <code style="line-height: 24px !important;">
                        private Task ForeverLong(CancellationToken ct)
                        {
                            while (true)
                            {
                                ct.ThrowIfCancellationRequested();
                        
                                //Cheking 
                        
                                Task.Delay(1000);
                            }
                        }                                         
                    </code>
                </pre>
            </div>
        </div>
    </section>     
        <section class="slide" style="background-color:white">
            <figure>
                <img class="cover" src="pictures/maszynastanow.png" alt="blog">
                <figcaption class="white">CW</figcaption>
            </figure>
        </section>
    
    <section class="slide" style="background-color:black">
        <figure>
            <img class="cover" src="pictures/MSTS24-204-OADN-11.png" alt="blog">
            <figcaption class="white">CW</figcaption>
        </figure>
    </section>

    <section class="slide prism over bhgry">
        <div class="grid-container">
            <div class="HeaderTitle GG"> 
                <h2 class="headerCODE GG">GetCatFactAsync</h2>
            </div>
            <div class="PlaceCodeHere canscroll">
                <pre style="font-size: 24px;overflow: hidden;  " class="language-csharp">
                    <code style="line-height: 24px !important;">
                        private async Task DoAsync()
                        {
                            txtBlock.Text += &quot;Rozpoczynam liczenie&quot;;
                            string result;
                        
                            try
                            {
                                result = await HeavyCalculationAsync(txt_X.Text, txt_Y.Text)
                                    .ConfigureAwait(true);
                        
                               await SaveToFile(result).ConfigureAwait(false);
                            }
                            catch (Exception ex)
                            {
                                result = ex.ToString();
                            }
                        
                            txtBlock.Text += result;
                        }                          
                    </code>
                </pre>
            </div>
        </div>
    </section> 
    <section class="slide prism over bhgry">
        <div class="grid-container">
            <div class="HeaderTitle GG"> 
                <h2 class="headerCODE GG">GetCatFactAsync</h2>
            </div>
            <div class="PlaceCodeHere canscroll">
                <pre style="font-size: 24px;overflow: hidden;  " class="language-csharp">
                    <code style="line-height: 24px !important;">
                        private async Task DoAsync()
                        {
                            txtBlock.Text += &quot;Rozpoczynam liczenie&quot;;
                            string result;
                        
                            try
                            {
                                result = await HeavyCalculationAsync(txt_X.Text, txt_Y.Text)
                                    .ConfigureAwait(ConfigureAwaitOptions.ContinueOnCapturedContext);
                        
                               await SaveToFile(result).ConfigureAwait(ConfigureAwaitOptions.None
                                   | ConfigureAwaitOptions.SuppressThrowing
                                   | ConfigureAwaitOptions.ForceYielding);
                            }
                            catch (Exception ex)
                            {
                                result = ex.ToString();
                            }
                        
                            txtBlock.Text += result;
                        }                       
                    </code>
                </pre>
            </div>
        </div>
    </section> 
    <section class="slide prism over bhgry">
        <div class="grid-container">
            <div class="HeaderTitle GG"> 
                <h2 class="headerCODE GG">Async Void</h2>
            </div>
            <div class="PlaceCodeHere canscroll">
                <pre style="font-size: 24px;overflow: hidden;  " class="language-csharp">
                    <code style="line-height: 24px !important;">
                        // Simulated download tasks
                        List&lt;Task&lt;int&gt;&gt; downloadTasks = [DownloadData1, DownloadData2, DownloadData3];
                        
                        // Process tasks as they complete
                        while (downloadTasks.Any())
                        {
                            Task&lt;int&gt; finishedTask = await Task.WhenAny(downloadTasks);
                            downloadTasks.Remove(finishedTask);
                            int result = await finishedTask;
                            ProcessDataChunk(result);
                        }                                       
                    </code>
                </pre>
            </div>
        </div>
    </section>     

    <section class="slide prism over bhgry">
        <div class="grid-container">
            <div class="HeaderTitle GG"> 
                <h2 class="headerCODE GG">Async Void</h2>
            </div>
            <div class="PlaceCodeHere canscroll">
                <pre style="font-size: 24px;overflow: hidden;  " class="language-csharp">
                    <code style="line-height: 24px !important;">
                        namespace System.Threading.Tasks;

                        public class Task
                        {
                           public static IAsyncEnumerable&lt;Task&gt; WhenEach(params Task[] tasks);
                           public static IAsyncEnumerable&lt;Task&gt; WhenEach(params ReadOnlySpan&lt;Task&gt; tasks); // params when possible
                           public static IAsyncEnumerable&lt;Task&gt; WhenEach(IEnumerable&lt;Task&gt; tasks);
                        }                                    
                    </code>
                </pre>
            </div>
        </div>
    </section>
    <section class="slide prism over bhgry">
        <div class="grid-container">
            <div class="HeaderTitle GG"> 
                <h2 class="headerCODE GG">Async Void</h2>
            </div>
            <div class="PlaceCodeHere canscroll">
                <pre style="font-size: 24px;overflow: hidden;  " class="language-csharp">
                    <code style="line-height: 24px !important;">
                        List&lt;Task&lt;int&gt;&gt; tasks = Enumerable.Range(1,5).Select(Calculate).ToList();

                        await foreach (var item in Task.WhenEach(tasks))
                        {
                            Console.WriteLine(item);
                        }
                        
                        async Task&lt;int&gt; Calculate(int order)
                        {
                            var number = Random.Shared.Next(500, 5000);
                        
                            await Task.Delay(number);
                        
                            return number;
                        }                           
                    </code>
                </pre>
            </div>
        </div>
    </section>
    <section class="slide prism over bhgry">
        <div class="grid-container">
            <div class="HeaderTitle GG"> 
                <h2 class="headerCODE GG">Async Void</h2>
            </div>
            <div class="PlaceCodeHere canscroll">
                <pre style="font-size: 24px;overflow: hidden;  " class="language-csharp">
                    <code style="line-height: 24px !important;">
                        using var cts = new CancellationTokenSource(10_000);
                        await foreach (var item in Task.WhenEach(connectionRequests).WithCancellation(cts.Token))
                        {
                            // If TryReset fails, the timeout expired right after the last task completed.
                            if (!cts.TryReset()) cts.Token.ThrowIfCancellationRequested();
                        
                            ProcessItem(item.Result);
                        
                            cts.CancelAfter(10_000); // Start the timer again
                        }                         
                    </code>
                </pre>
            </div>
        </div>
    </section>        
    <section class="slide" style="background-color:black">
        <figure>
            <img class="cover" src="pictures/MSTS24-204-OADN-11.png" alt="blog">
            <figcaption class="white">CW</figcaption>
        </figure>
    </section>
    <!-- <div class="progress"></div> -->
    <footer class="badge badge-top-left">
        <a href="#" class="fullscreen">Fullscreen</a>
    </footer>

    <script src="vendors/gamepad/gamepad.js"></script>
    <script src="vendors/shower/shower.min.js"></script>
    <script src="vendors/shower-gamepad/shower.gamepad.js"></script>

    <!-- Prism.js -->
    <script src="vendors/prism/prism.js"></script>
    <script src="vendors/prism/custom-prism.js"></script>

</body>

</html>